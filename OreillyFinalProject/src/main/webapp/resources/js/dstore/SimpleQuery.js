//>>built
define("dstore/SimpleQuery",["dojo/_base/declare","dojo/_base/array"],function(_1,_2){var _3={eq:function(_4,_5){return _4===_5;},"in":function(_6,_7){return _2.indexOf(_7,_6)>-1;},ne:function(_8,_9){return _8!==_9;},lt:function(_a,_b){return _a<_b;},lte:function(_c,_d){return _c<=_d;},gt:function(_e,_f){return _e>_f;},gte:function(_10,_11){return _10>=_11;},match:function(_12,_13,_14){return _13.test(_12,_14);}};return _1(null,{_createFilterQuerier:function(_15){var _16=this.queryAccessors;var _17=this;var _18=_19(_15);function _19(_1a){var _1b=_1a.type;var _1c=_1a.args;var _1d=_17._getFilterComparator(_1b);if(_1d){var _1e=_1c[0];var _1f=_1c[1];return function(_20){return _1d(_16&&_20.get?_20.get(_1e):_20[_1e],_1f,_20);};}switch(_1b){case "and":case "or":for(var i=0,l=_1c.length;i<l;i++){var _21=_19(_1c[i]);if(_18){_18=(function(a,b){return _1b==="and"?function(_22){return a(_22)&&b(_22);}:function(_23){return a(_23)||b(_23);};})(_18,_21);}else{_18=_21;}}return _18;case "function":return _1c[0];case "string":var _24=_17[_1c[0]];if(!_24){throw new Error("No filter function "+_1c[0]+" was found in the collection");}return _24;case undefined:return function(){return true;};default:throw new Error("Unknown filter operation \""+_1b+"\"");}};return function(_25){return _2.filter(_25,_18);};},_getFilterComparator:function(_26){return _3[_26]||this.inherited(arguments);},_createSortQuerier:function(_27){return function(_28){_28=_28.slice();_28.sort(typeof _27=="function"?_27:function(a,b){for(var i=0;i<_27.length;i++){var _29;if(typeof _27[i]=="function"){_29=_27[i](a,b);}else{var _2a=_27[i].property;var _2b=_27[i].descending;var _2c=a.get?a.get(_2a):a[_2a];var _2d=b.get?b.get(_2a):b[_2a];_2c!=null&&(_2c=_2c.valueOf());_2d!=null&&(_2d=_2d.valueOf());_29=_2c===_2d?0:(!!_2b===(_2c===null||_2c>_2d&&_2d!==null)?-1:1);}if(_29!==0){return _29;}}return 0;});return _28;};}});});