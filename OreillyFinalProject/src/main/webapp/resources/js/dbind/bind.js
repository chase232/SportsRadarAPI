//>>built
define("dbind/bind",[],function(){function _1(_2){this.value=_2;if(_2){_2._binding=this;}};_1.prototype={receive:function(_3){var _4=this.callbacks;(_4||(this.callbacks=[])).push(_3);if(_4){if("value" in this){_3(this.value);}}else{var _5=this;_4=this.callbacks;this.getValue(function(_6){_5.value=_6;for(var i=0;i<_4.length;i++){_4[i](_6);}});}return {remove:function(){for(var i=0;i<_4.length;++i){if(_3===_4[i]){_4.splice(i,1);break;}}}};},getValue:function(_7){if(this.hasOwnProperty("value")){_7(this.value);}},get:function(_8,_9){var _a,_b=this["_"+_8]||(this["_"+_8]=this.hasOwnProperty("value")&&this.value&&typeof this.value=="object"?new _c(this.value,_8):new _1());if(_9){return _b.receive(_9);}return _b;},put:function(_d){if(this.source){this.source.put(_d);}_d._binding=this;this.is(_d);},set:function(_e,_f){this.get(_e).put(_f);},is:function(_10){if(_10!==this.value){this.value=_10;if(typeof this.value=="object"){for(var i in _10){if(i.charAt(0)!="_"){var _11=this.get(i);_11.object=_10;_11.is(_10[i]);}}}if(this.callbacks){for(var i=0;i<this.callbacks.length;i++){this.callbacks[i](_10);}}}},keys:function(_12){if(this.source){this.source.keys(_12);}for(var i in this.value){if(i.charAt(0)!="_"){_12(i,this.get(i));}}},to:function(_13,_14){_13=_15(_13);if(_14){_13=_13.get(_14);}var _16=this;this.source=_13;_13.receive(function(_17){_16.is(_17);});for(var i in this){if(i.charAt(0)=="_"){i=i.slice(1);var _18=_16.get(i);var _19=_13.get(i);if(_18!=_19){_18.to(_19);}}}_13.keys(function(i,_1a){if(!(("_"+i) in _16)){var _1b=_16.get(i);if(_1b!=_1a){_1b.to(_1a);}}});return this;}};function _1c(_1d){this.stateful=_1d;_1d._binding=this;};_1c.prototype=new _1({});_1c.prototype.to=function(_1e){_1.prototype.to.apply(this,arguments);_1e=this.source;var _1f=this.stateful;_1e.receive(function(_20){_1f.set("value",_20);});_1f.watch("value",function(_21,_22,_23){if(_22!==_23){_1e.put(_23);}});return this;};_1c.prototype.get=function(key,_24){return this["_"+key]||(this["_"+key]=new _25(this.stateful,key));};_1c.prototype.keys=function(_26){for(var i in this.stateful){if(i.charAt(0)!="_"){_26(i,this.get(i));}}};function _25(_27,_28){this.stateful=_27;this.name=_28;};_25.prototype=new _1;_25.prototype.getValue=function(_29){var _2a=this.stateful,_2b=this.name;_29(_2a.get(_2b));_2a.watch(_2b,function(_2c,_2d,_2e){if(_2d!==_2e){_29(_2e);}});};_25.prototype.is=function(_2f){this.stateful._changeAttrValue(this.name,_2f);};_25.prototype.put=function(_30){this.stateful.set(this.name,_30);};function _31(_32,_33){this.element=_32;this.container=_33;_32._binding=this;};function _34(_35){return new _31(_35,true);};_31.prototype=new _1({});var _36={radio:1,checkbox:1};_31.prototype.is=function(_37){var _38=this.element;if(this.container||_38.tagName=="FORM"){return _1.prototype.is.call(this,_37);}if("value" in _38){if(_38.type=="radio"){_38.checked=_38.value==_37;}else{if(_38.type=="checkbox"){_38.checked=_37;}else{_38.value=_37||"";}}}else{_38.innerText=_37||"";}this.oldValue=_37;};var _39={"INPUT":1,"SELECT":1,"TEXTAREA":1};_31.prototype.to=function(_3a){_1.prototype.to.apply(this,arguments);_3a=this.source;var _3b=this.element;if(_3b.tagName=="FORM"){var _3c=this;function _3d(tag){var _3e=_3b.getElementsByTagName(tag);for(var i=0;i<_3e.length;i++){var _3f=_3e[i];if(_3f.name){_57(_3f,_3c.get(_3f.name));}}};_3d("input");_3d("select");}else{if(_3b.tagName in _39){var _40,_3c=this,_41=_3b.onchange=function(){if(_3b.type=="radio"){if(_3b.checked){_40=_3b.value;}else{return;}}else{_40=_3b.type=="checkbox"?_3b.checked:_3b.value;}_3a.put(typeof _3c.oldValue=="number"&&!isNaN(_40)?+_40:_40);};if(_3b.getAttribute("data-continuous")){_3b.onkeyup=_41;}}}return this;};_31.prototype.receive=function(_42){var _43=this.element;if(this.container){return _1.prototype.receive.call(this,_42);}if("value" in _43){_42(_43.value);_43.onchange=function(){_42(_43.value);};}else{_42(_43.innerText);}};function _44(){_1.apply(this,arguments);};_44.prototype=new _1({});_44.prototype.getValue=function(_45){var _46=[],_47=0,_48=this.value.length;for(var i=0;i<_48;i++){(function(i,_49){_5d(_49,function(_4a){_46[i]=_4a;_47++;if(_47>=_48){_45(_46);}});})(i,this.value[i]);}};function _c(_4b,_4c){this.object=_4b;this.name=_4c;};_c.prototype=new _1;_c.prototype.getValue=function(_4d){_4d(this.object[this.name]);};_c.prototype.put=function(_4e){this.object[this.name]=_4e;this.is(_4e);};function _4f(_50,_51){this.func=_50;this.reverseFunc=_51;};_4f.prototype={receive:function(_52){if(_52){var _53=this.func;return this.source.receive(function(_54){_52(_54!=null&&_54.join?_53.apply(this,_54):_53(_54));});}},get:function(key){return this[key]||(this[key]=new _1("None"));},put:function(_55){this.source.put(this.reverseFunc(_55));},is:function(){},to:function(_56){_56=_57.apply(this,arguments);this.source=_56;return this;},keys:function(){}};function _15(_58){return _58?_58._binding||(_58.get?_58.is?_58:new _1c(_58):_58.nodeType?new _31(_58):typeof _58=="function"?new _4f(_58):_58 instanceof Array?new _44(_58):new _1(_58)):new _1(_58);};function _57(to){to=_15(to);for(var i=1;i<arguments.length;i++){var arg=arguments[i];if(typeof arg=="object"||typeof arg=="function"){arg=_15(arguments[i]);to.to(arg);}else{to=to.get(arg);}}return to;};var _59=Object.prototype.watch;function get(_5a,key,_5b){if(key.call){if(_5a.get){if(_5a.get.binding){_5a.get(key);}else{key(_5a.get("value"));}}else{key(_5a);}}else{var _5c;if(_5a.get){if(_5a.get.binding){_5a.get(key,_5b);}else{key(_5a.get("value"));if(_5a.watch===_59){_5a.watch("value",key);}}}else{return new _c(_5a,key);}}};_57.get=get;_57.Element=_31;_57.Container=_34;_57.Binding=_1;function _5d(_5e,_5f){if(_5e&&_5e.receive){return _5e.receive(_5f);}return _5f(_5e);};_57.when=_5d;return _57;});