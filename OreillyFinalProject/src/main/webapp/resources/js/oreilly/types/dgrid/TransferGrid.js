//>>built
require({cache:{"url:oreilly/types/dgrid/templates/TransferGrid.html":"<div class=\"well\">\n\t<div data-dojo-attach-point=\"loadingContentNode\" class=\"dgrid-loading hidden\"></div>\n\t<div data-dojo-attach-point=\"gridContentNode\">\n\t\t<div class=\"row\" style=\"margin-bottom: 5px;\">\n\t\t\t<div class=\"col-sm-3 col-sm-offset-3\">\n\t\t\t\t<input data-dojo-attach-point=\"fromFilterNode\"/>\n\t\t\t</div>\n\t\t\t<div class=\"col-sm-3 col-sm-offset-3\">\n\t\t\t\t<input data-dojo-attach-point=\"toFilterNode\"/>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"row\">\n\t\t\t<div class=\"col-sm-6\">\n\t\t\t\t<table data-dojo-attach-point=\"fromNode\" class=\"table table-striped table-condensed\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th class=\"col-md-9\" data-dgrid-column='{field:\"name\", name:\"name\", highlightText: true}'>\n\t\t\t\t\t\t\t\t${fromGridHeader}\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<th class=\"col-md-3 centercontents\" data-dgrid-column='{renderCell: function(item, currentText, cell) {\n\t\t\t\t\t\t\t\treturn this.grid.getParent() ? this.grid.getParent()._renderAddCell(item, currentText, cell) : function () {};\n\t\t\t\t\t\t\t}}'></th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t</table>\n\t\t\t\t<div class=\"centercontents\">\n\t\t\t\t\t<a data-dojo-attach-point=\"addAllLink\">Add All</a>\n\t\t\t\t</div>\n\t\t    </div>\n\t\t    <div class=\"col-sm-6\">\n\t\t    \t<table data-dojo-attach-point=\"toNode\" class=\"table table-striped table-condensed\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th class=\"col-md-9\" data-dgrid-column='{field:\"name\", name:\"name\", highlightText: true}'>\n\t\t\t\t\t\t\t\t${toGridHeader}\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<th class=\"col-md-3  centercontents\" data-dgrid-column='{renderCell: function(item, currentText, cell) {\n\t\t\t\t\t\t\t\treturn this.grid.getParent() ? this.grid.getParent()._renderRemoveCell(item, currentText, cell) : function () {};\n\t\t\t\t\t\t\t}}'></th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t</table>\n\t\t\t\t<div class=\"centercontents\">\n\t\t\t\t\t<a data-dojo-attach-point=\"removeAllLink\">Remove All</a>\n\t\t\t\t</div>\n\t\t    </div>\n\t    </div>\n    </div>\n</div>"}});define("oreilly/types/dgrid/TransferGrid",["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","oreilly/types/dgrid/GridSearchBox","oreilly/types/dgrid/PagingGrid","dojo/_base/lang","dojo/Evented","dojo/on","dojo/promise/all","dojo/_base/array","dojo/dom-class","dojo/text!./templates/TransferGrid.html"],function(_1,_2,_3,_4,_5,_6,_7,_8,on,_9,_a,_b,_c){return _1([_2,_3,_4],{templateString:_c,loadDataOnStartup:true,fromGridHeader:"Available Items",toGridHeader:"Selected Items",gridReady:false,buildRendering:function(){var _d=this;this.inherited(arguments);this.fromGrid=new _6({store:this.fromStore,showPaginationStatusNode:false,loadDataOnStartup:false},this.fromNode);this.toGrid=new _6({store:this.toStore,showPaginationStatusNode:false,loadDataOnStartup:false},this.toNode);this.fromFilter=new _5({gridId:this.fromGrid.get("id"),trim:true,intermediateChanges:true},this.fromFilterNode);this.toFilter=new _5({gridId:this.toGrid.get("id"),trim:true,intermediateChanges:true},this.toFilterNode);this.own(this.fromGrid,this.toGrid,this.fromFilter,this.toFilter);},postCreate:function(){on(this.fromGrid,"a:click",_7.hitch(this,this._addToSelection));on(this.toGrid,"a:click",_7.hitch(this,this._removeFromSelection));on(this.addAllLink,"click",_7.hitch(this,this._addAllToSelection));on(this.removeAllLink,"click",_7.hitch(this,this._removeAllFromSelection));},startup:function(){if(this._started){return;}this.inherited(arguments);this.fromGrid.startup();this.toGrid.startup();if(this.loadDataOnStartup){this.loadContent();}},_renderAddCell:function(_e,_f,_10){var _11=_10.appendChild(document.createElement("a"));_11.text="Add";return _11;},_renderRemoveCell:function(_12,_13,_14){var _15=_14.appendChild(document.createElement("a"));_15.text="Remove";return _15;},_addToSelection:function(e){e.preventDefault();var row=this.fromGrid.row(e);this.toGrid.store.add(row.data);this.fromGrid.store.remove(row.id);this._refreshPagingGrids();},_removeFromSelection:function(e){e.preventDefault();var row=this.toGrid.row(e);this.fromGrid.store.add(row.data);this.toGrid.store.remove(row.id);this._refreshPagingGrids();},_addAllToSelection:function(e){e.preventDefault();this._addAndRemoveAll(this.fromGrid,this.toGrid);},_removeAllFromSelection:function(e){e.preventDefault();this._addAndRemoveAll(this.toGrid,this.fromGrid);},_addAndRemoveAll:function(_16,_17){if(self.gridReady===false){return;}var _18=_16.filterString.toLowerCase(),_19=[],_1a=[];_16.store.data.forEach(function(_1b){if(_1b.name.toLowerCase().indexOf(_18)!==-1){_1a.push(_1b);}else{_19.push(_1b);}});_16.store.setData(_19);_17.store.setData(_17.store.data.concat(_1a));_16.refresh();_17.refresh();},loadContent:function(){var _1c=this,_1d={};_1c._contentIsLoading();if(_1c.fromGrid.store.loadData){_1d.fromGridFunction=_1c.fromGrid.store.loadData();}if(_1c.toGrid.store.loadData){_1d.toGridFunction=_1c.toGrid.store.loadData();}if(_1d.fromGridFunction||_1d.toGridFunction){_9(_1d).then(function(_1e){_1c._refreshPagingGrids();_1c._contentHasLoaded();});}else{_1c._refreshPagingGrids();_1c._contentHasLoaded();}},_refreshPagingGrids:function(){this.fromGrid.refresh();this.toGrid.refresh();},_showLoadingMessage:function(){_b.remove(this.loadingContentNode,"hidden");_b.add(this.gridContentNode,"hidden");},_hideLoadingMessage:function(){_b.add(this.loadingContentNode,"hidden");_b.remove(this.gridContentNode,"hidden");},_contentIsLoading:function(){this.emit("contentisloading",{});this.gridReady=false;this._showLoadingMessage();},_contentHasLoaded:function(){this.emit("contenthasloaded",{});this.gridReady=true;this._hideLoadingMessage();},_setAvailableStoreAttr:function(_1f){this.fromGrid.set("store",_1f);},_setSelectedStoreAttr:function(_20){this.toGrid.set("store",_20);},getSelectedValues:function(){return _a.map(this.toGrid.store.data,function(_21){return _21.id;});}});});