//>>built
define("oreilly/types/form/DateTextBox",["dojo/_base/declare","dojo/_base/lang","dijit/form/DateTextBox","dijit/_HasDropDown","dojo/ready","dojo/_base/array","dijit/registry"],function(_1,_2,_3,_4,_5,_6,_7){return _1("oreilly/types/form/DateTextBox",_3,{toDate:null,bothRequired:true,validDates:null,templateString:"<div class='dijit dijitReset dijitInline dijitLeft' id='widget_${id}'\trole='combobox'\taria-haspopup='true' data-dojo-attach-point='_popupStateNode'>"+"<div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer' data-dojo-attach-point='_buttonNode' role='presentation' >"+"<input class='dijitReset dijitInputField' value=' ' type='text' tabIndex='-1' readonly='readonly' role='button presentation' aria-hidden='true' ${_buttonInputDisabled}"+"style='width:0'/>"+"<span class='glyphicon glyphicon-calendar'></span>"+"</div>"+"<div class='dijitReset dijitValidationContainer'>"+"<input class='dijitReset dijitInputField dijitValidationIcon dijitValidationInner' value='&#935; ' type='text' tabIndex='-1' readonly='readonly' role='presentation'/>"+"</div>"+"<div class='dijitReset dijitInputField dijitInputContainer'><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type='text' autocomplete='off' data-dojo-attach-point='textbox,focusNode' role='textbox'/>"+"</div>"+"</div>",constructor:function(_8){_2.mixin(this,_8);},validate:function(_9){var _a=this.inherited(arguments);if(_a&&this.customValidator){_a=this.customValidator(_9);}return _a;},isValid:function(_b){var _c;if(this.validDates){_c=this.get("value");if(_c){_c.setHours(1,0,0,0);return _6.indexOf(this.validDates,_c.getTime())>-1;}}return this.inherited(arguments)&&((this._isEmpty(this.textbox.value)&&!this.required)||this.isInRange(_b));},_updateWidgets:function(_d,_e,_f){if(!_d||!this.toDateWidget){return;}var _10=this.get("value"),_11=this.toDateWidget.get("value");if(!_f){delete _d.constraints[_e];if(!_10&&!_11){this.set("required",false);this.toDateWidget.set("required",false);}}else{_d.constraints[_e]=_f;if(this.bothRequired){this.set("required",true);this.toDateWidget.set("required",true);}}},_setToDateWidget:function(id){var _12=this;_12.toDateWidget=_7.byId(id||_12.toDate);if(!_12.toDateWidget){return;}_12.toDateHandler=_12.toDateWidget.on("change",function(_13){_12._updateWidgets(_12,"max",_13);});_12.own(_12.toDateHandler);},_setToDateAttr:function(id){if(this.toDateHandler){this.toDateHandler.remove();}this._setToDateWidget(id);},_setValidDatesAttr:function(_14){var _15;if(_14&&_14 instanceof Array){_15=[];length=_14.length;for(i=0;i<length;i+=1){tempDate=new Date(_14[i]);tempDate.setHours(1,0,0,0);_15[i]=tempDate?tempDate.getTime():_14[i];}}this.validDates=_15;},postCreate:function(_16){var _17=this,i,_18,_19;this.inherited(arguments);this.own(this.on("change",function(_1a){_17._updateWidgets(_17.toDateWidget,"min",_1a);}));this._setValidDatesAttr(this.validDates);_5(function(){_17._setToDateWidget();if(!_17.toDateWidget){return;}_17._updateWidgets(_17,"max",_17.toDateWidget.get("value")||_17.toDateWidget.constraints.max);_17._updateWidgets(_17.toDateWidget,"min",_17.get("value")||_17.constraints.min);});},openDropDown:function(_1b){var _1c=this,_1d=_2.isString(_1c.popupClass)?_2.getObject(_1c.popupClass,false):_1c.popupClass,_1e=_1c.get("value");if(_1c.dropDown){_1c.dropDown.destroy();}_1c.dropDown=new _1d({onChange:function(_1f){_1c.set("value",_1f,true);},id:_1c.id+"_popup",dir:_1c.dir,lang:_1c.lang,value:_1e,textDir:_1c.textDir,currentFocus:!_1c._isInvalidDate(_1e)?_1e:_1c.dropDownDefaultValue,constraints:_1c.constraints,filterString:_1c.filterString,datePackage:_1c.datePackage,isDisabledDate:function(_20){var ms;if(_1c.validDates&&_1c.validDates instanceof Array&&_20){ms=_20;ms.setHours(1,0,0,0);return !(_6.indexOf(_1c.validDates,ms.getTime())>-1);}else{return !_1c.rangeCheck(_20,_1c.constraints);}}});_4.prototype.openDropDown.apply(this,arguments);}});});