//>>built
define("oreilly/types/store/MemoryStoreFromJson",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/request/xhr","dojo/Deferred","dojo/store/Memory","dojo/Evented"],function(_1,_2,_3,_4,_5,_6,_7){return _1("oreilly.types.store.MemoryStoreFromJson",[_6,_7],{url:"",data:[],serverQueryParameters:{},promise:null,put:function(_8,_9){var _a=this.data,_b=this.index,_c=this.idProperty,_d=this,_e=null,_f=null,id,_10,_11;id=_8[_c]=(_9&&"id" in _9)?_9.id:_c in _8?_8[_c]:Math.random();if(id in _b){_e=_b[id];_a.splice(_e,1);_2.forEach(_a,function(_12,i){_b[_d.getIdentity(_12)]=i;});}if(_9&&(_9.before||_9.beforeId)){_10=_9.before||_9.beforeId;_11=_d.getIdentity(_10);_f=_b[_11];_a.splice(_f,0,_8);}else{_a.push(_8);}_2.forEach(_a,function(_13,i){_b[_d.getIdentity(_13)]=i;});return id;},constructor:function(_14){this.inherited(arguments);_3.mixin(this,_14);},loadData:function(){var _15=this;if(_15.promise&&!_15.promise.isCanceled()){_15.promise.cancel();}_15.promise=_4(this.url,{query:this.serverQueryParameters,handleAs:"json",headers:{"Content-Type":"application/json"}});_15.promise.then(function(_16){_15.setData(_16);_15.promise=null;_15.emit("data-loaded",{data:_16});},function(_17){});return _15.promise;}});});