//>>built
define("bootstrap/Scrollspy",["./Support","dojo/_base/declare","dojo/query","dojo/_base/lang","dojo/_base/window","dojo/on","dojo/dom-class","dojo/dom-construct","dojo/dom-attr","dojo/dom-geometry","dojo/NodeList-dom","dojo/NodeList-traverse","dojo/domReady!"],function(_1,_2,_3,_4,_5,on,_6,_7,_8,_9){"use strict";var _a="[data-spy=scroll]";var _b=_2([],{defaultOptions:{offset:10},constructor:function(_c,_d){this.options=_4.mixin(_4.clone(this.defaultOptions),(_d||{}));this.domNode=_c.tagName==="BODY"?_5.global:_c;this.element=_c;this.scrollEvent=on(this.domNode,"scroll",_4.hitch(this,"process"));this.selector=this.options.target;if(!this.selector){this.selector=_1.hrefValue(_c);}this.selector+=" .nav li > a";this.refresh();this.process();},refresh:function(){this.offsets=[];this.targets=[];var _e=_9.position(this.element,false).y;_3(this.selector,_5.body()).map(function(_f){var _10=_1.getData(_f,"target")||_8.get(_f,"href");var _11=/^#\w/.test(_10)&&_3(_10);var pos;if(_11[0]){pos=_9.position(_11[0],false);}return (_11&&_11.length&&[pos.y-_e,_10])||null;}).filter(function(_12){return _12;}).sort(function(a,b){return a[0]-b[0];}).forEach(function(_13){this.offsets.push(_13[0]);this.targets.push(_13[1]);},this);},process:function(){var _14=_9.position(this.element,false);if(this.element.tagName==="BODY"){var _15=Math.abs(Math.round(_14.y));}else{var _15=this.element.scrollTop;}_15+=parseInt(this.options.offset,10);var _16=this.element.scrollHeight||_5.body().scrollHeight;var _17=(this.element.tagName==="BODY")?this.domNode.innerHeight:_14.h;var _18=Math.abs(_16-_17);var _19=this.offsets;var _1a=this.targets;var _1b=this.activeTarget;var i;if(_15>=_18){return _1b!==(i=_1a[_1a.length-1])&&this.activate(i);}for(i=_19.length;i--;){if(_1b!==_1a[i]&&_15>=_19[i]&&(!_19[i+1]||_15<=_19[i+1])){this.activate(_1a[i]);}}},activate:function(_1c){this.activeTarget=_1c;_3(this.selector).parent(".active").removeClass("active");var _1d=this.selector+"[data-target=\""+_1c+"\"],"+this.selector+"[href=\""+_1c+"\"]";var _1e=_3(_1d).parent("li").addClass("active");if(_1e.parent(".dropdown-menu").length){_1e=_1e.closest("li.dropdown").addClass("active");}on.emit(_1e[0],"activate.bs.scrollspy",{bubbles:false,cancelable:false});}});_4.extend(_3.NodeList,{scrollspy:function(_1f){var _20=(_4.isObject(_1f))?_1f:{};return this.forEach(function(_21){var _22=_1.getData(_21,"scrollspy");if(!_22){_1.setData(_21,"scrollspy",(_22=new _b(_21,_20)));}if(_4.isString(_1f)){_22[_1f].call(_22);}});}});_3(_a).forEach(function(_23){_3(_23).scrollspy(_1.getData(_23));});return _b;});